# my-fifth-project
![0](https://user-images.githubusercontent.com/64473684/85670821-e3427600-b6de-11ea-881a-3d700b5ae476.jpg)
**DevOps Assembly Lines: Continuous Monitoring**

**Objective is to create two containers for starting Prometheus and Grafana servers and Deploying them on the top of Kubernetes**



**Prometheus:**
![1](https://user-images.githubusercontent.com/64473684/85671253-521fcf00-b6df-11ea-988b-c208ffb90468.jpg)
1] Creating a Dockerfile for Prometheus container.
**Dockerfile:**
```javascript
FROM centos


RUN yum install wget -y

RUN wget https://github.com/prometheus/prometheus/releases/download/v2.19.0/prometheus-2.19.0.linux-amd64.tar.gz

RUN tar -xzf prometheus-2.19.0.linux-amd64.tar.gz

RUN mkdir /prom_data

CMD ./prometheus-2.19.0.linux-amd64/prometheus --config.file=/prometheus-2.19.0.linux-amd64/prometheus.yml --storage.tsdb.path=/prom_data && tail -f /dev/null
 
 ```
We create a new directory prom_data for storing metrics data generated by Prometheus. Build the above Docker image from the following command:

```javascript
docker build -t dockerninad07/prometheus:v1 .
```
Now create a deployment in Kubernetes for Prometheus containers. But before creating the Deployment, we need to create a Persistent Volume storage for storing the data generated by Prometheus, permanently. We create it as follows:

**2] PersistentVolume:**
```javascript
apiVersion: v1

kind: PersistentVolume

metadata:
  name: prom-pv
  labels:
    type: local

spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/mnt/sda1/data/prometheus"

```
Create the volume from the command:
```javascript
kubectl create -f prom_pv.yml
```








